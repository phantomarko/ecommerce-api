services:
    app.product.service.product_to_array:
        class: 'App\Application\Product\Service\ProductToArrayConverter'

    app.get_products_command_to_product_filters_converter:
        class: 'App\Application\Product\Service\GetProductsCommandToProductFiltersConverter'
        arguments:
            - '@app.taxonomy.repository.doctrine'

    app.product.service.product_factory:
        class: App\Domain\Product\Service\ProductFactory
        arguments:
            - '@app.product.repository.doctrine'
            - '@app.common.service.ramsey_uuid_generator'
            - '@app.taxonomy.repository.doctrine'

    app.product.command.get_products:
        class: App\Application\Product\Command\GetProducts\GetProductsCommandHandler
        tags:
            - { name: tactician.handler, typehints: true }
        arguments:
            - '@app.product.repository.doctrine'
            - '@app.product.service.product_to_array'
            - '@app.get_products_command_to_product_filters_converter'

    app.product.command.create_product:
        class: App\Application\Product\Command\CreateProduct\CreateProductCommandHandler
        tags:
            - { name: tactician.handler, typehints: true }
        arguments:
            - '@app.product.service.product_factory'
            - '@app.product.service.product_to_array'

    app.product.repository.doctrine:
        class: App\Infrastructure\Product\Repository\DoctrineProductRepository
        arguments:
            - '@Doctrine\Persistence\ManagerRegistry'